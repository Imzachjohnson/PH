{% extends "base.html" %}  
{% block content %} 

                    <!-- Start Content-->
                    <div class="container-fluid">
                        
                        <!-- start page title -->
                        <div class="row">
                            <div class="col-12">
                                <div class="page-title-box">
                                    <div class="page-title-right">
                                        <ol class="breadcrumb m-0">
                                            <li class="breadcrumb-item"><a href="javascript: void(0);">Preperar Haiti</a></li>
                                            <li class="breadcrumb-item"><a href="javascript: void(0);">Projects</a></li>
                                            <li class="breadcrumb-item active">{{data.BuildingName}}</li>
                                        </ol>
                                    </div>
                                    <h1 class="page-title" style ="margin-bottom: 5px!important;line-height: 28px!important; font-size:28px!important;margin-top:30px!important">Project Details - {{data.BuildingName}} </h1>
                                    <h3><span id = "tag" class="badge bg-danger" >Red Tagged</span></h3>
                                </div>
                            </div>
                        </div>     
                        <!-- end page title --> 

                        <div class="row">
                            <div dir="ltr">
                                <div class="mt-3 chartjs-chart" style="height: 520px;">
                                    <div id="mapid" style="height: 500px;"></div><br>

                                </div>
                            </div>
                            <div class="col-lg-6 col-xxl-4">
                                
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title mb-3">Contact Information</h5>
                                        
                                        
                                        
                                        <ul class="list-group">
                                            <li class="list-group-item"><i class="uil-user-square me-1"></i> <b> Name: </b>{{data.contact}}</li>
                                            <li class="list-group-item"><i class=" uil-phone me-1"></i><b> Phone: </b> {{data.phone}}</li>
                                            <li class="list-group-item"><i class=" uil-map-marker me-1"></i><b> Address: </b>{{data.address}}</li>
                                            <li class="list-group-item"><i class=" uil-map-pin-alt me-1"></i><b> Coordinates: </b>{{data.latitude}}, {{data.longitude}}</li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- end card-->

                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title mb-3">Assessment Information</h5>
                                        <ul class="list-group">
                                            <li class="list-group-item"><i class="uil-user-hard-hat me-1"></i> <b> Assessed by:</b> {{data.submitedby}}</li>
                                            <li class="list-group-item"><i class="uil-info-circle me-1"></i> <b> Inspector ID:</b> {{data.inspectorid}}</li>
                                            <li class="list-group-item"><i class="uil-heart-rate me-1"></i><b>Assessement Type:</b> {{data.assessmenttype}}</li>
                                            <li class="list-group-item"><i class="uil-calendar-alt me-1"></i><b>Assessement Date:</b> {{data.assessmentdate}}</li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- end card-->
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title mb-3">Images</h5>
                                      
                                       <a href="{{data.thumbnail}}" target="_blank" ><img src="{{data.thumbnail}}" alt="image" class="img-fluid img-thumbnail" width="200"/></a>
                                    </div>
                                </div>
                                <!-- end card-->


                                    
                            </div>
                            <div class="col-xxl-8 col-lg-6">
                                
                                <!-- project card -->
                           

                               
                                <div class="row">
                                    <div class="col-xl-4 col-lg-12">
                                     
                                        <div class="card widget-flat">
                                            <div class="card-body">
                                                <div class="float-end">
                                                    <i class="mdi mdi-currency-usd widget-icon bg-light rounded-circle text-primary"></i>
                                                </div>
                                                <h5 class="text-muted fw-normal mt-0" title="Revenue">Estimated Repair Cost</h5>
                                                <h3 class="mt-3 mb-3">${{data.cost}}</h3>
                                             
                                            </div>
                                        </div>
                                    </div> <!-- end col -->
        
                                    
                                        <div class="col-xl-4 col-lg-12">
                                            <div class="card widget-flat">
                                                <div class="card-body">
                                                    <div class="float-end">
                                                        <i class="mdi mdi-account-group widget-icon bg-light rounded-circle text-primary"></i>
                                                    </div>
                                                    <h5 class="text-muted fw-normal mt-0" title="Growth">Estimated Damage</h5>
                                                    <h3 class="mt-3 mb-3">{{data.estimateddamage}}</h3>
                                                   
                                                </div>
                                            </div>
                                    </div> <!-- end col -->
                                    <div class="col-xl-4 col-lg-12">
                                        <div class="card widget-flat">
                                            <div class="card-body">
                                                <div class="float-end">
                                                    <i class="mdi mdi-calendar widget-icon bg-light rounded-circle text-primary"></i>
                                                </div>
                                                <h5 class="text-muted fw-normal mt-0" title="Growth">Year Built</h5>
                                                <h3 class="mt-3 mb-3">{{data.yearbuilt}}</h3>
                                               
                                            </div>
                                        </div>


                                        

                                </div> <!-- end col -->

                                
                                <div class="col-xl-12 col-lg-12">
                                    
                                    <div class="card widget-flat">
                                        <div class="card-body">

                                            
                                    <div class="row mx-n1 g-0">
                                        
                                        <div class="col-xxl-3 col-lg-6">
                                            <div class="card m-1 shadow-none border">
                                                <div class="p-2">
                                                    <div class="row align-items-center">
                                                        <div class="col-auto">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light text-secondary rounded">
                                                                    <i class="mdi mdi-eye font-16"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-0">
                                                            <a href="javascript:void(0);" class="text-muted fw-bold">Inspected Area</a>
                                                            <p class="mb-0 font-13">{{data.inspectedarea}}</p>
                                                        </div>
                                                    </div> <!-- end row -->
                                                </div> <!-- end .p-2-->
                                            </div> <!-- end col -->
                                        </div> <!-- end col-->

                                        <div class="col-xxl-3 col-lg-6">
                                            <div class="card m-1 shadow-none border">
                                                <div class="p-2">
                                                    <div class="row align-items-center">
                                                        <div class="col-auto">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light text-secondary rounded">
                                                                    <i class="mdi mdi-arrow-up-thick font-16"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-0">
                                                            <a href="javascript:void(0);" class="text-muted fw-bold">Stories Above</a>
                                                            <p class="mb-0 font-13">{{data.storiesabove}}</p>
                                                        </div>
                                                    </div> <!-- end row -->
                                                </div> <!-- end .p-2-->
                                            </div> <!-- end col -->
                                        </div> <!-- end col-->

                                        <div class="col-xxl-3 col-lg-6">
                                            <div class="card m-1 shadow-none border">
                                                <div class="p-2">
                                                    <div class="row align-items-center">
                                                        <div class="col-auto">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light text-secondary rounded">
                                                                    <i class="mdi mdi-arrow-down-thick font-16"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-0">
                                                            <a href="javascript:void(0);" class="text-muted fw-bold">Stories Below</a>
                                                            <p class="mb-0 font-13">{{data.storiesbelow}}</p>
                                                        </div>
                                                    </div> <!-- end row -->
                                                </div> <!-- end .p-2-->
                                            </div> <!-- end col -->
                                        </div> <!-- end col-->

                                        <div class="col-xxl-3 col-lg-6">
                                            <div class="card m-1 shadow-none border">
                                                <div class="p-2">
                                                    <div class="row align-items-center">
                                                        <div class="col-auto">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light text-secondary rounded">
                                                                    <i class="mdi mdi-tape-measure font-16"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-0">
                                                            <a href="javascript:void(0);" class="text-muted fw-bold">Approx Area</a>
                                                            <p class="mb-0 font-13">{{data.approxarea}}sqm</p>
                                                        </div>
                                                    </div> <!-- end row -->
                                                </div> <!-- end .p-2-->
                                            </div> <!-- end col -->
                                        </div> <!-- end col-->
                                        
                                    </div> <!-- end row-->
                                    <div class="row mx-n1 g-0">
                                        
                                        <div class="col-xxl-3 col-lg-6">
                                            <div class="card m-1 shadow-none border">
                                                <div class="p-2">
                                                    <div class="row align-items-center">
                                                        <div class="col-auto">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light text-secondary rounded">
                                                                    <i class="mdi mdi-home-roof font-16"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-0">
                                                            <a href="javascript:void(0);" class="text-muted fw-bold">Roof Type</a>
                                                            <p class="mb-0 font-13">{{data.rooftype}}</p>
                                                        </div>
                                                    </div> <!-- end row -->
                                                </div> <!-- end .p-2-->
                                            </div> <!-- end col -->
                                        </div> <!-- end col-->

                                        <div class="col-xxl-3 col-lg-6">
                                            <div class="card m-1 shadow-none border">
                                                <div class="p-2">
                                                    <div class="row align-items-center">
                                                        <div class="col-auto">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light text-secondary rounded">
                                                                    <i class="mdi mdi-home-city font-16"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-0">
                                                            <a href="javascript:void(0);" class="text-muted fw-bold">Primary Occupancy</a>
                                                            <p class="mb-0 font-13">{{data.primaryoccupancy}}</p>
                                                        </div>
                                                    </div> <!-- end row -->
                                                </div> <!-- end .p-2-->
                                            </div> <!-- end col -->
                                        </div> <!-- end col-->

                                        <div class="col-xxl-3 col-lg-6">
                                            <div class="card m-1 shadow-none border">
                                                <div class="p-2">
                                                    <div class="row align-items-center">
                                                        <div class="col-auto">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light text-secondary rounded">
                                                                    <i class="mdi mdi-home-alert font-16"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-0">
                                                            <a href="javascript:void(0);" class="text-muted fw-bold">Estimated Damage</a>
                                                            <p class="mb-0 font-13">{{data.estimateddamage}}</p>
                                                        </div>
                                                    </div> <!-- end row -->
                                                </div> <!-- end .p-2-->
                                            </div> <!-- end col -->
                                        </div> <!-- end col-->

                                        <div class="col-xxl-3 col-lg-6">
                                            <div class="card m-1 shadow-none border">
                                                <div class="p-2">
                                                    <div class="row align-items-center">
                                                        <div class="col-auto">
                                                            <div class="avatar-sm">
                                                                <span class="avatar-title bg-light text-secondary rounded">
                                                                    <i class="mdi mdi-terrain font-16"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-0">
                                                            <a href="javascript:void(0);" class="text-muted fw-bold">Soil Type</a>
                                                            <p class="mb-0 font-13">{{data.soil}}</p>
                                                        </div>
                                                    </div> <!-- end row -->
                                                </div> <!-- end .p-2-->
                                            </div> <!-- end col -->
                                        </div> <!-- end col-->
                                        
                                    </div> <!-- end row-->
                                </div>
                                </div>
                            </div>
                            
                        </div>
                        
                        
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="header-title mb-4">Structural Damage</h4>
                                    <div dir="ltr">
    
                                        <div id = "chart"></div>
                                    </div>
                                </div>
                                <!-- end card body-->
                            </div>
                            <!-- end card -->
                            

                            </div> <!-- end col -->

                       
                        </div>
                        <!-- end row -->
                        
                    </div> <!-- container -->

                </div> <!-- content -->

            </div>

            <!-- ============================================================== -->
            <!-- End Page content -->
            <!-- ============================================================== -->


        </div>
        <!-- END wrapper -->


        <!-- Right Sidebar -->
        <div class="end-bar">

            <div class="rightbar-title">
                <a href="javascript:void(0);" class="end-bar-toggle float-end">
                    <i class="dripicons-cross noti-icon"></i>
                </a>
                <h5 class="m-0">Settings</h5>
            </div>

            <div class="rightbar-content h-100" data-simplebar>

                <div class="p-3">
                    <div class="alert alert-warning" role="alert">
                        <strong>Customize </strong> the overall color scheme, sidebar menu, etc.
                    </div>

                    <!-- Settings -->
                    <h5 class="mt-3">Color Scheme</h5>
                    <hr class="mt-1" />

                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="color-scheme-mode" value="light" id="light-mode-check" checked>
                        <label class="form-check-label" for="light-mode-check">Light Mode</label>
                    </div>

                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="color-scheme-mode" value="dark" id="dark-mode-check">
                        <label class="form-check-label" for="dark-mode-check">Dark Mode</label>
                    </div>
       

                    <!-- Width -->
                    <h5 class="mt-4">Width</h5>
                    <hr class="mt-1" />
                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="width" value="fluid" id="fluid-check" checked>
                        <label class="form-check-label" for="fluid-check">Fluid</label>
                    </div>

                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="width" value="boxed" id="boxed-check">
                        <label class="form-check-label" for="boxed-check">Boxed</label>
                    </div>
        

                    <!-- Left Sidebar-->
                    <h5 class="mt-4">Left Sidebar</h5>
                    <hr class="mt-1" />
                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="theme" value="default" id="default-check">
                        <label class="form-check-label" for="default-check">Default</label>
                    </div>

                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="theme" value="light" id="light-check" checked>
                        <label class="form-check-label" for="light-check">Light</label>
                    </div>

                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" name="theme" value="dark" id="dark-check">
                        <label class="form-check-label" for="dark-check">Dark</label>
                    </div>

                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="compact" value="fixed" id="fixed-check" checked>
                        <label class="form-check-label" for="fixed-check">Fixed</label>
                    </div>

                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="compact" value="condensed" id="condensed-check">
                        <label class="form-check-label" for="condensed-check">Condensed</label>
                    </div>

                    <div class="form-check form-switch mb-1">
                        <input class="form-check-input" type="checkbox" name="compact" value="scrollable" id="scrollable-check">
                        <label class="form-check-label" for="scrollable-check">Scrollable</label>
                    </div>

                    <div class="d-grid mt-4">
                        <button class="btn btn-primary" id="resetBtn">Reset to Default</button>
            
                      
                    </div>
                </div> <!-- end padding-->

            </div>
            <meta id="my-data" data-latitude="{{data.latitude}}" data-longitude="{{data.longitude}}">

        </div>

        <div class="rightbar-overlay"></div>
        <!-- /End-bar -->
        <script type="text/javascript">
        

$( document ).ready(function() {


    tagged ="{{data.tag}}"

var greenIcon = new L.Icon({
            iconUrl: "{{ url_for('static', filename='/images/marker-green.png') }}",
            iconSize: [41, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
    });
    
    var yellowIcon = new L.Icon({
        iconUrl: "{{ url_for('static', filename='/images/marker-yellow.png') }}",
            iconSize: [41, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
    });
    

    
    var redIcon = new L.Icon({
        iconUrl: "{{ url_for('static', filename='/images/marker-red.png') }}",
            iconSize: [41, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
    });


        var mymap = L.map('mapid').setView([jQuery('#my-data').data('latitude'), jQuery('#my-data').data('longitude')], 18);
            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWl5YW1vdG9pbnRlcm5hdGlvbmFsIiwiYSI6ImNrc2phYW0xcTI4d3Iyem5xMmh1ZjRsZ2EifQ.Yh7n3cI78Rc7QBnQcQTSmw', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            backgroundcolor: "red",
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'pk.eyJ1IjoibWl5YW1vdG9pbnRlcm5hdGlvbmFsIiwiYSI6ImNrc2phYW0xcTI4d3Iyem5xMmh1ZjRsZ2EifQ.Yh7n3cI78Rc7QBnQcQTSmw'
            }).addTo(mymap);   


            
            if (tagged == "Unsafe") {
            var newMarker = L.marker([jQuery('#my-data').data('latitude'), jQuery('#my-data').data('longitude')], {icon: redIcon}).addTo(mymap);
        
          
            newMarker.image = redIcon
          
            }
    
            if (tagged == "Restricted") {
                var newMarker = L.marker([jQuery('#my-data').data('latitude'), jQuery('#my-data').data('longitude')], {icon: yellowIcon}).addTo(mymap);
      
            newMarker.image = yellowIcon
         
            }
    
            if (tagged == "Safe") {
            var newMarker = L.marker([jQuery('#my-data').data('latitude'), jQuery('#my-data').data('longitude')], {icon: greenIcon}).addTo(mymap);
            newMarker.image = greenIcon
       
            }


    var tagged = "{{data.tag}}"


    if (tagged =="Unsafe") {
    $("#tag").text("Red Tag | Unsafe");
    
}
    if (tagged =="Restricted") {
    $("#tag").text("Yellow Tag | Restricted");
    
    $('#tag').removeClass('bg-danger').addClass('bg-warning');
}


    if (tagged =="Safe") {

        $("#tag").text("Green Tag | Safe");
        $('#tag').removeClass('bg-danger').addClass('bg-success');
    }

   



    var options = {
        fill: {
  colors: ['#d75146','#F44336','#F44336',]
},
          series: [{
          name: 'Damage',
          data: ["{{data.offoundation}}", "{{data.leaning}}", "{{data.collapse}}", "{{data.ptoa}}", "{{data.damageother}}"]
        }],
          chart: {
          height: 400,
          type: 'bar',
        },
        plotOptions: {
            
          bar: {
            columnWidth: '40%',
            barHeight: '60%',
            borderRadius: 10,
            dataLabels: {
                enabled: false, // top, center, bottom
            },
          
          }
        },
        
        dataLabels: {
          enabled: false,
          formatter: function (val) {
            return val;
          },
         
          style: {
            fontSize: '16px',
            colors: ["#F44336"]
          }
        },
        
        xaxis: {

            labels: {
          show: true,
          rotate: -45,
          rotateAlways: false,
          trim: false,
          minHeight: 0,
          maxHeight: 100,
          style: {
              colors: [],
              fontSize: '16px',
              fontFamily: 'Helvetica, Arial, sans-serif',
              fontWeight: 400,
              cssClass: 'apexcharts-xaxis-label',
          },
      },  
          categories: ["Off Foundation", "Building Leaning", "Collapse", "Pounding to Adjacent", "Other"],
          position: 'bottom',
          axisBorder: {
            show: false
          },

          
          axisTicks: {
            show: false
          },
          crosshairs: {
            fill: {
              type: 'gradient',
              gradient: {
                colorFrom: '#F44336',
                colorTo: '#BED1E6',
                stops: [0, 100],
                opacityFrom: 0.4,
                opacityTo: 0.5,
              }
            }
          },
          tooltip: {
            enabled: false,
          }
        },
        yaxis: {
            showForNullSeries: true,
            tickAmount: 2,
          axisBorder: {
            show: true
          },
          axisTicks: {
            show: true,
            borderType: 'solid',
            color: '#78909C',
            width: 4,
            offsetX: 0,
            offsetY: 0,
      },
      
          labels: {
            show: true,
            formatter: function (val) {
                if(val == 0){
                return "None";
              }  
              
                if(val == 1){
                return "Moderate";
              }  

              

              if(val == 2){
                return "Severe";
              }  
              
              
            }
          }
        
        },
        title: {
          text: 'Overall Damage',
          floating: true,
          offsetY: -5,
          align: 'center',
          style: {
            color: '#444'
          }

          
        }

        
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();

    });



</script>

        <!-- bundle -->
        <script src="{{ url_for('static', filename='js/vendor.min.js') }}"></script>
        <script src="{{ url_for('static', filename='/js/app.min.js') }}"></script>

        <!-- third party js -->
        <script src="{{ url_for('static', filename='/js/vendor/Chart.bundle.min.js') }}"></script>
        <!-- third party js ends -->

        <!-- demo app -->
        <script src="{{ url_for('static', filename='/js/pages/demo.project-detail.js') }}"></script>
        <!-- end demo js-->
        <script src="{{ url_for('static', filename='/js/vendor/d3.min.js') }}"></script>

        <!-- third party:js -->
        <!-- third party end -->

        <!-- demo:js -->
      


    </body>
</html>
{% endblock %}